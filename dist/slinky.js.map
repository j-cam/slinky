{"version":3,"sources":["slinky.js"],"names":["Slinky","resize","speed","theme","title","element","options","settings","_init","menu","jQuery","base","children","first","addClass","_transition","prev","wrapInner","header","prepend","back","prop","each","index","label","parent","find","text","append","_addListeners","_jumpToInitial","on","_clicked","Date","now","link","e","currentTarget","attr","indexOf","hasClass","preventDefault","removeClass","next","show","_move","_resize","hide","parentsUntil","active","length","jump","setTimeout","height","outerHeight","depth","callback","left","Math","round","parseInt","get","style","css","content","target","animate","to","count","menus","parents","not","remove","off","contents","unwrap","styles","split","forEach","fields","field","$","fn","slinky"],"mappings":"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","file":"slinky.js","sourcesContent":["/*\n * Slinky\n * Rather sweetmenus\n * @author Ali Zahid <ali.zahid@live.com>\n * @license MIT\n */\n\nclass Slinky {\n  // default options\n  get options() {\n    return {\n      resize: true,\n      speed: 300,\n      theme: 'slinky-theme-default',\n      title: false\n    }\n  }\n\n  constructor(element, options = {}) {\n    // save settings\n    this.settings = {\n      ...this.options,\n      ...options\n    }\n\n    // let's go!\n    this._init(element)\n  }\n\n  // setup the DOM just for us\n  _init(element) {\n    // the two elements of water and moisture\n    this.menu = jQuery(element)\n    this.base = this.menu.children().first()\n\n    const { base, menu, settings } = this\n\n    // set theme\n    menu.addClass('slinky-menu').addClass(settings.theme)\n\n    // set transition speed\n    this._transition(settings.speed)\n\n    // add arrows to links with children\n    jQuery('a + ul', menu)\n      .prev()\n      .addClass('next')\n\n    // wrap link text with <span>\n    // mostly for styling\n    jQuery('li > a', menu).wrapInner('<span>')\n\n    // create header item\n    const header = jQuery('<li>').addClass('header')\n\n    // prepend it to the list\n    jQuery('li > ul', menu).prepend(header)\n\n    // create back buttons\n    const back = jQuery('<a>')\n      .prop('href', '#')\n      .addClass('back')\n\n    // prepend them to the headers\n    jQuery('.header', menu).prepend(back)\n\n    // do we need to add titles?\n    if (settings.title) {\n      // loop through each child list\n      jQuery('li > ul', menu).each((index, element) => {\n        // get the label from the parent link\n        const label = jQuery(element)\n          .parent()\n          .find('a')\n          .first()\n          .text()\n\n        // if it's not empty, create the title\n        if (label) {\n          const title = jQuery('<header>')\n            .addClass('title')\n            .text(label)\n\n          // append it to the immediate header\n          jQuery('> .header', element).append(title)\n        }\n      })\n    }\n\n    // add click listeners\n    this._addListeners()\n\n    // jump to initial active\n    this._jumpToInitial()\n  }\n\n  // click listeners\n  _addListeners() {\n    const { menu, settings } = this\n\n    jQuery('a', menu).on('click', e => {\n      // prevent broken/half transitions\n      if (this._clicked + settings.speed > Date.now()) {\n        return false\n      }\n\n      // cache click time to check on next click\n      this._clicked = Date.now()\n\n      // get the link\n      const link = jQuery(e.currentTarget)\n\n      // prevent default if it's a hash\n      // or a Slinky button\n      if (\n        link.attr('href').indexOf('#') === 0 ||\n        link.hasClass('next') ||\n        link.hasClass('back')\n      ) {\n        e.preventDefault()\n      }\n\n      // time to move\n      if (link.hasClass('next')) {\n        // one step forward\n\n        // remove the current active\n        menu.find('.active').removeClass('active')\n\n        // set the new active\n        link\n          .next()\n          .show()\n          .addClass('active')\n\n        // make the chess move\n        this._move(1)\n\n        // resize the menu if need be\n        if (settings.resize) {\n          this._resize(link.next())\n        }\n      } else if (link.hasClass('back')) {\n        // and two steps back\n        // just one step back, actually\n\n        // make the move\n        this._move(-1, () => {\n          // remove the current active\n          menu.find('.active').removeClass('active')\n\n          // set the new active\n          link\n            .parent()\n            .parent()\n            .hide()\n            .parentsUntil(menu, 'ul')\n            .first()\n            .addClass('active')\n        })\n\n        // resize the menu if need be\n        if (settings.resize) {\n          this._resize(\n            link\n              .parent()\n              .parent()\n              .parentsUntil(menu, 'ul')\n          )\n        }\n      }\n    })\n  }\n\n  // jump to initial active on init\n  _jumpToInitial() {\n    const { menu, settings } = this\n\n    // get initial active\n    const active = menu.find('.active')\n\n    if (active.length > 0) {\n      // remove initial active\n      active.removeClass('active')\n\n      // jump without animation\n      this.jump(active, false)\n    }\n\n    // set initial height on the menu\n    // to fix the first transition resize bug\n    setTimeout(() => menu.height(menu.outerHeight()), settings.speed)\n  }\n\n  // slide the menu\n  _move(depth = 0, callback = () => {}) {\n    // don't bother packing if we're not going anywhere\n    if (depth === 0) {\n      return\n    }\n\n    const { settings, base } = this\n\n    // get current position from the left\n    const left = Math.round(parseInt(base.get(0).style.left)) || 0\n\n    // set the new position from the left\n    base.css('left', `${left - depth * 100}%`)\n\n    // callback after the animation\n    if (typeof callback === 'function') {\n      setTimeout(callback, settings.speed)\n    }\n  }\n\n  // resize the menu\n  // to match content height\n  _resize(content) {\n    const { menu } = this\n\n    menu.height(content.outerHeight())\n  }\n\n  // set the transition speed\n  _transition(speed = 300) {\n    const { menu, base } = this\n\n    menu.css('transition-duration', `${speed}ms`)\n    base.css('transition-duration', `${speed}ms`)\n  }\n\n  // jump to an element\n  jump(target, animate = true) {\n    if (!target) {\n      return\n    }\n\n    const { menu, settings } = this\n\n    const to = jQuery(target)\n\n    // get all current active\n    const active = menu.find('.active')\n\n    // how many moves must we jump?\n    let count = 0\n\n    // this many\n    // until we reach the parent list\n    if (active.length > 0) {\n      count = active.parentsUntil(menu, 'ul').length\n    }\n\n    // remove current active\n    // hide all lists\n    menu\n      .find('ul')\n      .removeClass('active')\n      .hide()\n\n    // get parent list\n    const menus = to.parentsUntil(menu, 'ul')\n\n    // show parent list\n    menus.show()\n\n    //\n    to.show().addClass('active')\n\n    // set transition speed to 0 if no animation\n    if (!animate) {\n      this._transition(0)\n    }\n\n    // make the checkers move\n    this._move(menus.length - count)\n\n    // resize menu if need be\n    if (settings.resize) {\n      this._resize(to)\n    }\n\n    // set transition speed to default after transition\n    if (!animate) {\n      this._transition(settings.speed)\n    }\n  }\n\n  // go big or go home\n  // just go home\n  home(animate = true) {\n    const { base, menu, settings } = this\n\n    // set transition speed to 0 if no animation\n    if (!animate) {\n      this._transition(0)\n    }\n\n    // get current active\n    const active = menu.find('.active')\n\n    // get all parent lists\n    const parents = active.parentsUntil(menu, 'ul')\n\n    // make the move\n    this._move(-parents.length, () => {\n      // remove the current active\n      active.removeClass('active').hide()\n\n      // hide all parents except base\n      parents.not(base).hide()\n    })\n\n    // resize if need be\n    if (settings.resize) {\n      this._resize(base)\n    }\n\n    // set transition speed back to default\n    if (animate === false) {\n      this._transition(settings.speed)\n    }\n  }\n\n  // crush, kill, destroy\n  destroy() {\n    const { base, menu } = this\n\n    // remove all headers\n    jQuery('.header', menu).remove()\n\n    // remove Slinky links\n    // and click listeners\n    jQuery('a', menu)\n      .removeClass('next')\n      .off('click')\n\n    // remove inline styles\n    menu.css({\n      height: '',\n      'transition-duration': ''\n    })\n\n    base.css({\n      left: '',\n      'transition-duration': ''\n    })\n\n    // remove Slinky HTML\n    jQuery('li > a > span', menu)\n      .contents()\n      .unwrap()\n\n    // remove any current active\n    menu.find('.active').removeClass('active')\n\n    // remove any Slinky style classes\n    const styles = menu.attr('class').split(' ')\n\n    styles.forEach(style => {\n      if (style.indexOf('slinky') === 0) {\n        menu.removeClass(style)\n      }\n    })\n\n    // reset fields\n    const fields = ['settings', 'menu', 'base']\n\n    fields.forEach(field => delete this[field])\n  }\n}\n\n// jQuery plugin\n;($ => {\n  $.fn.slinky = function(options) {\n    const menu = new Slinky(this, options)\n\n    return menu\n  }\n})(jQuery)\n"]}